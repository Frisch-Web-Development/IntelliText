<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1" name="google-signin-client_id"
	content="337875401568-h311m0lmtprrvgbak83kdgubqtn2siep.apps.googleusercontent.com"/>

 <title>InteliText</title>

<script src="https://apis.google.com/js/client:platform.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"> </meta> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
  <link rel="stylesheet" href="CSS/login.css"></link>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<div id = "top">
<h1 id = "welcome">Welcome Please Sign in</h1>
<div id="my-signin2"></div>
</div>
</head>
<body>

	<script>
		function onSuccess(googleUser) {	
			console.log('Logged in as: '
					+ googleUser.getBasicProfile().getEmail());
			var data = [googleUser.getBasicProfile().getName(), googleUser.getBasicProfile().getEmail()]; 
			$.ajax({
				type : "POST",
				headers: {
					"Content-Type": "application/json"
				},
				url : "/login/finish",
				data : JSON.stringify(data),
			}).done(function(response) {
				console.log("response:" + response);
			//	$(location).attr('href', 'http://localhost:8080/home');  // don't forget to move this from local host! 
			});

		}
		function onFailure(error) {
			console.log(error);
		}
		function renderButton() {
			gapi.signin2.render('my-signin2', {
				'scope' : 'profile email',
				'width' : 240,
				'height' : 25,
				'longtitle' : true,
				'theme' : 'dark',
				'onsuccess' : onSuccess,
				'onfailure' : onFailure
			});
		}
	</script>

	<script
		src="https://apis.google.com/js/platform.js?onload=renderButton"></script>


</body>
</html>