<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1" name="google-signin-client_id"
	content="337875401568-h311m0lmtprrvgbak83kdgubqtn2siep.apps.googleusercontent.com"/>

<!-- <title>Welcome</title>
 -->
<script src="https://apis.google.com/js/client:platform.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<div id="my-signin2"></div>
	<script>
		function onSuccess(googleUser) {	
			console.log('Logged in as: '
					+ googleUser.getBasicProfile().getName());
			var data = googleUser; 
			$.ajax({
				type : "POST",
				contentType : "application/json",
				url : "/login/finish",
				data : JSON.stringify(data),
				dataType : 'json',
				timeout : 100000,
				success : function(data) {
					console.log("SUCCESS: ", data);
					//display(data);
				},
				error : function(e) {
					console.log("ERROR: ", e);
					//display(e);
				},
				done : function(e) {
					console.log("DONE");
				}
			});

		}
		function onFailure(error) {
			console.log(error);
		}
		function renderButton() {
			gapi.signin2.render('my-signin2', {
				'scope' : 'profile email',
				'width' : 240,
				'height' : 50,
				'longtitle' : true,
				'theme' : 'dark',
				'onsuccess' : onSuccess,
				'onfailure' : onFailure
			});
		}
	</script>

	<script
		src="https://apis.google.com/js/platform.js?onload=renderButton"></script>


</body>
</html>